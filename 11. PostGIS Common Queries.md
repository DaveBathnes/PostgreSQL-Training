PostGIS Common Queries
======================

There are many spatial queries that can be run within PostGIS.

ST_X
----

Returns the X coordinate of the geometry.

```
select ST_X(geom) from postcodes_geo where postcode = 'EX1 1EE';
```

ST_Y
----

Returns the Y coordinate of the geometry.

```
select ST_Y(geom) from postcodes_geo where postcode = 'EX1 1EE';
```

ST_Transform
------------

Transforms a geometry into the specified SRID.

```
select ST_Transform(geom, 4326) from postcodes_geo where postcode  = 'EX1 1EE';
```

Using that to extract the Lng/Lat:

```
select ST_X(ST_Transform(geom, 4326)), ST_Y(ST_Transform(geom, 4326))  from postcodes_geo where postcode  = 'EX1 1EE';
```

ST_DWithin
----------

Returns results that are within a specified distance. In the case below, returns results that are within 100 metres of a certain point.

```
select postcode from postcodes_geo where ST_DWithin(geom, ST_SetSRID(ST_MakePoint(292079, 92307), 27700), 100);
```

ST_Intersects
-------------

Returns results that share the same space.  In the case below, returns postcodes that are within Devon.

```
select postcode from postcodes_geo where ST_Intersects(
    geom,
    (select geom from county_region where name = 'Devon County')
);
```

ST_Centroid
-----------

Returns the centre point of a geometry.

```
select ST_X(ST_Centroid(wkb_geometry)), ST_X(ST_Centroid(wkb_geometry)) from street where usrn = 14202557
```

- Many, many more.  We can go through some targeted examples.